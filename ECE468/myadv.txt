;IR code
;STOREF 0.0001 $T1
;STOREF $T1 tolerance
;READF num 
;STOREF num approx
;STOREI 0 $T2
;STOREI $T2 count
;STOREF 0.0 $T3
;STOREF $T3 diff
;STOREI 0 $T4
;STOREI $T4 enough
;LABEL label1 
;STOREI 1 $T5
;EQ enough $T5 label2
;STOREI 1 $T6
;ADDI count $T6 $T7
;STOREI $T7 count
;DIVF num approx $T8
;ADDF approx $T8 $T9
;STOREF 0.5 $T10
;MULTF $T10 $T9 $T11
;STOREF $T11 newapprox
;SUBF approx newapprox $T12
;STOREF $T12 diff
;STOREF 0.0 $T13
;LE diff $T13 label3
;GE diff tolerance label5
;STOREI 1 $T14
;STOREI $T14 enough
;JUMP label6 
;LABEL label5 
;LABEL label6 
;JUMP label4 
;LABEL label3 
;STOREF 0.0 $T15
;SUBF $T15 tolerance $T16
;LE diff $T16 label7
;STOREI 1 $T17
;STOREI $T17 enough
;JUMP label8 
;LABEL label7 
;LABEL label8 
;LABEL label4 
;STOREF newapprox approx
;JUMP label1 
;LABEL label2 
;WRITEF approx 
;WRITES space 
;WRITEI count 
;WRITES eol 
;tiny code
var count 
var enough 
var newapprox 
var approx 
var num 
var tolerance 
var diff 
str eol "\n" 
str space " " 
move 0.0001 r0 
move r0 tolerance 
sys readr num 
move num r1 
move r1 approx 
move 0 r2 
move r2 count 
move 0.0 r3 
move r3 diff 
move 0 r4 
move r4 enough 
label label1 
move 1 r5 
cmpi enough r5 
jeq label2 
move 1 r6 
move count r7 
addi r6 r7 
move r7 count 
move num r8 
divr approx r8 
move approx r9 
addr r8 r9 
move 0.5 r10 
mulr r9 r10 
move r10 newapprox 
move approx r11 
subr newapprox r11 
move r11 diff 
move 0.0 r12 
cmpr diff r12 
jle label3 
move tolerance r13 
cmpr diff r13 
jge label5 
move 1 r14 
move r14 enough 
jmp label6 
label label5 
label label6 
jmp label4 
label label3 
move 0.0 r15 
subr tolerance r15 
cmpr diff r15 
jle label7 
move 1 r16 
move r16 enough 
jmp label8 
label label7 
label label8 
label label4 
move newapprox r17 
move r17 approx 
jmp label1 
label label2 
sys writer approx 
sys writes space 
sys writei count 
sys writes eol 
sys halt
