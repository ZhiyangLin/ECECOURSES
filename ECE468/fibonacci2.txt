;IR code
;LABEL F 
;LINK
;STOREI 2 $T1
;LE $P1 $T1 label1
;STOREI 1 $T2
;SUBI $P1 $T2 $T3
;PUSH
;PUSH $T3 
;JSR F 
;POP
;POP $T4 
;STOREI $T4 $L1
;STOREI 2 $T5
;SUBI $P1 $T5 $T6
;PUSH
;PUSH $T6 
;JSR F 
;POP
;POP $T7 
;STOREI $T7 $L2
;ADDI $L1 $L2 $T8
;STOREI $T8 $R
;RET
;JUMP label2 
;LABEL label1 
;STOREI 0 $T9
;NE $P1 $T9 label3
;STOREI 0 $T10
;STOREI $T10 $R
;RET
;JUMP label4 
;LABEL label3 
;STOREI 1 $T11
;NE $P1 $T11 label5
;STOREI 1 $T12
;STOREI $T12 $R
;RET
;JUMP label6 
;LABEL label5 
;STOREI 1 $T13
;STOREI $T13 $R
;RET
;LABEL label6 
;LABEL label4 
;LABEL label2 

;LABEL main 
;LINK
;WRITES input 
;READI $L2 
;STOREI 0 $T1
;STOREI $T1 $L1
;LABEL label7 
;EQ $L1 $L2 label8
;PUSH
;PUSH $L1 
;JSR F 
;POP
;POP $T2 
;STOREI $T2 $L3
;WRITEI $L1 
;WRITES space 
;WRITEI $L3 
;WRITES eol 
;STOREI 1 $T3
;ADDI $L1 $T3 $T4
;STOREI $T4 $L1
;JUMP label7 
;LABEL label8 
;STOREI 0 $T5
;STOREI $T5 $R
;RET

;tiny code
str input "Please input an integer number: " 
str space " " 
str eol "\n" 
push 
push r0 
push r1 
push r2 
push r3 
jsr main 
sys halt 
label F 
link 3 
move 2 r0 
cmpi $P1 r0 
jle label1 
move 1 r1 
move $6 r2 
subi $-4 r2 
cmpr none r2 
cmpr none 
cmpr none r2 
cmpr $T3 
cmpr none r2 
cmpr F 
cmpr none r2 
cmpr none 
cmpr none r2 
cmpr $T4 
move r3 $L1 
move 2 r4 
subi $-7 r2 
cmpr none r4 
cmpr none 
cmpr none r4 
cmpr $T6 
cmpr none r4 
cmpr F 
cmpr none r4 
cmpr none 
cmpr none r4 
cmpr $T7 
move r5 $L2 
move $-1 r6 
addi $-2 r6 
move r6 $R 
cmpr none r6 
cmpr none 
jmp label2 
label label1 
move 0 r7 
cmpi $P1 r7 
jne label3 
move 0 r8 
move r8 $R 
cmpr none r8 
cmpr none 
jmp label4 
label label3 
move 1 r9 
cmpi $P1 r9 
jne label5 
move 1 r10 
move r10 $R 
cmpr none r10 
cmpr none 
jmp label6 
label label5 
move 1 r11 
move r11 $R 
cmpr none r11 
cmpr none 
label label6 
label label4 
label label2 
cmpr none r11 
cmpr none 
label main 
link 4 
sys writes input 
sys readi $L2 
move 0 r12 
move r12 $L1 
label label7 
cmpi $L1 r12 
jeq label8 
cmpr none r12 
cmpr none 
cmpr none r12 
cmpr $L1 
cmpr none r12 
cmpr F 
cmpr none r12 
cmpr none 
cmpr none r12 
cmpr $T2 
move r1 $L3 
sys writei $L1 
sys writes space 
sys writei $L3 
sys writes eol 
move 1 r13 
addi $-6 r6 
move r6 $L1 
jmp label7 
label label8 
move 0 r14 
move r14 $R 
cmpr none r14 
cmpr none 
cmpr none r14 
cmpr none 
