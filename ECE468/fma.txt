;IR code
;LABEL add 
;LINK
;ADDF $P1 $P2 $T1
;STOREF $T1 $L1
;STOREF $L1 $R
;RET

;LABEL multiply 
;LINK
;MULTF $P1 $P2 $T1
;STOREF $T1 $L1
;STOREF $L1 $R
;RET

;LABEL main 
;LINK
;WRITES intro 
;WRITES first 
;READF $L1 
;WRITES second 
;READF $L2 
;WRITES third 
;READF $L3 
;PUSH
;PUSH $L1 
;PUSH $L2 
;JSR multiply 
;POP
;POP
;POP $T1 
;STOREF $T1 $L5
;PUSH
;PUSH $L5 
;PUSH $L3 
;JSR add 
;POP
;POP
;POP $T2 
;STOREF $T2 $L4
;WRITEF $L1 
;WRITES star 
;WRITEF $L2 
;WRITES plus 
;WRITEF $L3 
;WRITES equal 
;WRITEF $L4 
;WRITES eol 
;STOREI 0 $T3
;STOREI $T3 $R
;RET

;tiny code
str intro "You will be asked for three float numbers\n" 
str first "Please enter the first float number: " 
str second "Please enter the second float number: " 
str third "Please enter the third float number: " 
str eol "\n" 
str star "*" 
str plus "+" 
str equal "=" 
push 
push r0 
push r1 
push r2 
push r3 
jsr main 
sys halt 
label add 
link 2 
move $7 r0 
addr $6 r0 
move r0 $L1 
move r0 $R 
cmpr none r0
cmpr none 
cmpr none r0 
cmpr none 
label multiply 
link 2 
mulr $6 r0 
move r0 $L1 
move r0 $R 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr none 
label main 
link 6 
sys writes intro 
sys writes first 
sys readr $L1 
sys writes second 
sys readr $L2 
sys writes third 
sys readr $L3 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr $L1 
cmpr none r0 
cmpr $L2 
cmpr none r0 
cmpr multiply 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr $T1 
move r0 $L5 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr $L5 
cmpr none r0 
cmpr $L3 
cmpr none r0 
cmpr add 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr none 
cmpr none r0 
cmpr $T2 
move r1 $L4 
sys writer $L1 
sys writes star 
sys writer $L2 
sys writes plus 
sys writer $L3 
sys writes equal 
sys writer $L4 
sys writes eol 
move 0 r2 
move r2 $R 
cmpr none r2 
cmpr none 
cmpr none r2 
cmpr none 
